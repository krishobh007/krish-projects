<!-- Content PAYMENTS-->
<div id="journal-content" class="journal-content scrollable" ng-controller="RVJournalPaymentController" ng-iscroll='payment_content' ng-click="clickedOnPayment($event)">
    
    <div class="wrapper">
        <div ng-include="'/assets/partials/common/notification_message.html'"></div>
        <div id="journal-grid" class="journal-grid" ng-class="{'print-details': !data.isPaymentToggleSummaryActive}">

            <ul class="grid-header payment">
                <li class="name" translate>PAYMENT_TYPE</li>
                <li class="code" translate>CHARGE_CODE</li>
                <li class="number" translate>NUMBER</li>
                <li class="value" translate>AMOUNT</li>
            </ul>

            <!-- First level - payment types -->
            <div ng-repeat="(index1 ,level1) in data.paymentData.payment_types" ng-show="level1.show && level1.filterFlag" class="grid-group">
                <a ng-click="clickedFirstLevel(index1)" ng-class="{'active':level1.active, 'has-arrow':checkHasArrowLevel1(index1)}" class="payment-title toggle">
                    <strong class="name" ng-show="level1.show">{{escapeNullData(level1.payment_type)}}</strong>
                    <span class="code" ng-show="level1.show">{{escapeNullData(level1.charge_code)}}</span>  
                    <span class="number" ng-show="level1.show">{{escapeNullData(level1.number)}}</span>
                    <span class="value" ng-show="level1.show">{{currencySymbol}}{{ level1.amount | number: precisonTwo}}</span>
                </a>

                <!-- Second level - credit cards - if Payment type is Credit Card -->
                <div ng-if="level1.payment_type == 'Credit Card'" ng-repeat="(index2 ,level2) in level1.credit_cards" ng-show="level1.active" class="grid-charge">

                    <a ng-click="clickedSecondLevel(index1 ,index2)" ng-class="{'active':level2.active, 'has-arrow':checkHasArrowLevel2(index1,index2)}" ng-show="level2.show && level2.filterFlag" class="payment-title  toggle">
                        <span class="code" ng-show="level2.show">{{escapeNullData(level2.charge_code)}}</span>
                        <strong class="name" ng-show="level2.show">{{escapeNullData(level2.credit_card)}}</strong>  
                        <!-- <span class="number" ng-show="level2.show">{{'-'}}</span> -->     
                        <span class="value" ng-show="level2.show">{{currencySymbol}}{{level2.amount | number: precisonTwo}}</span>
                    </a>

                    <!-- Third level - transactions -->
                    <table ng-show="level2.active && level2.show" class="grid-items">
                        <thead>
                            <tr ng-show="isShowTableHeadingLevel2(index1 ,index2)">
                                <th scope="col" translate>ROOM_LABEL</th>
                                <th scope="col" translate>NAME</th>
                                <th scope="col" translate>RESERVATION_NUMBER</th>
                                <th scope="col" translate>DETAILS</th>
                                <th scope="col" translate>TIME</th>
                                <th scope="col" translate>DEBIT</th>
                                <th scope="col" translate>CREDIT</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="(index3 ,level3) in level2.transactions" ng-show="level3.show" class="grid-item hidden1">
                                <td>{{level3.room}}</td>
                                <td>{{level3.name}}</td>
                                <td>{{level3.reservation_number}}</td>
                                <td ng-bind-html="level3.details"></td>
                                <td>{{getTimeString(level3.date, level3.time)}}</td>
                                <td>{{currencySymbol}}{{level3.debit | number: precisonTwo}}</td>
                                <td>{{currencySymbol}}{{level3.credit | number: precisonTwo}}</td>                                           
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Second level -transactions - if Payment type is not Credit Card -->
                <div ng-if="level1.payment_type !== 'Credit Card'" >
                    
                    <table ng-show="level1.active" class="grid-items">
                        <thead>
                            <tr ng-show="isShowTableHeadingLevel1(index1)">
                                <th scope="col" translate>ROOM_LABEL</th>
                                <th scope="col" translate>NAME</th>
                                <th scope="col" translate>RESERVATION_NUMBER</th>
                                <th scope="col" translate>DETAILS</th>
                                <th scope="col" translate>TIME</th>
                                <th scope="col" translate>DEBIT</th>
                                <th scope="col" translate>CREDIT</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="(index2 ,level2) in level1.transactions" ng-show="level2.show" class="grid-item">
                                <td>{{level2.room}}</td>
                                <td>{{level2.name}}</td>
                                <td>{{level2.reservation_number}}</td>
                                <td ng-bind-html="level2.details"></td>
                                <td>{{getTimeString(level2.date, level2.time)}}</td>
                                <td>{{currencySymbol}}{{level2.debit | number: precisonTwo}}</td>   
                                <td>{{currencySymbol}}{{level2.credit | number: precisonTwo}}</td>                                   
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>

            <p class="grid-footer payment"><span translate>TOTAL</span> {{currencySymbol}}{{ getTotalOfAllPayments() | number: precisonTwo}}</p>
        </div>

    </div>
</div>
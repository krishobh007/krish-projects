<div role="dialog" id="modal" ng-class="{'modal-show': modalOpened}" ng-click="clearErrorMessage()" ng-cloak>
    <div class="modal-content room-enhancements">
        <span class="h2 message">Room {{packageData.room_no}} Enhancements</span>
        <div class="scrollable" ng-iscroll="resultDetails" ng-iscroll-delay="500">        
            <ul class="wrapper" >
                <li ng-repeat="existingPackages in packageData.existing_packages" class="addons-list">
                    <span class="item">{{existingPackages.package_name}}</span>

                    <!-- if addon type is adult /child type multiplification factor will be (addon_count*number of days*(adult_count or child_count)) -->
                    <!-- if addon type is person multiplification factor will be (addon_count*number of days*(adult_count+child_count))-->

                    <span ng-if="existingPackages.amount_type ==='Adult'">
                        <span class="count" ng-hide="existingPackages.post_type ==='Entire Stay'"> ({{existingPackages.count * reservationData.reservation_card.number_of_adults}})</span> 
                        <span class="count" ng-show="existingPackages.post_type ==='Entire Stay'"> ({{existingPackages.count* packageData.duration_of_stay *reservationData.reservation_card.number_of_adults}})</span>
                    </span>
                    <span ng-if="existingPackages.amount_type ==='Child'">
                        <span class="count" ng-hide="existingPackages.post_type ==='Entire Stay'"> ({{existingPackages.count*reservationData.reservation_card.number_of_children}})</span> 
                        <span class="count" ng-show="existingPackages.post_type ==='Entire Stay'"> ({{existingPackages.count* packageData.duration_of_stay*reservationData.reservation_card.number_of_children}})</span>
                    </span>

                    <span ng-if="existingPackages.amount_type ==='Flat'">
                        <span class="count" ng-hide="existingPackages.post_type ==='Entire Stay'"> ({{existingPackages.count}})</span> 
                        <span class="count" ng-show="existingPackages.post_type ==='Entire Stay'"> ({{existingPackages.count* packageData.duration_of_stay}})</span>
                    </span>
                    <span ng-if="existingPackages.amount_type ==='Person'">
                        <span class="count" ng-hide="existingPackages.post_type ==='Entire Stay'"> ({{existingPackages.count*(reservationData.reservation_card.number_of_children+reservationData.reservation_card.number_of_adults)}})</span> 
                        <span class="count" ng-show="existingPackages.post_type ==='Entire Stay'"> ({{existingPackages.count* packageData.duration_of_stay*(reservationData.reservation_card.number_of_children+reservationData.reservation_card.number_of_adults)}})</span>
                    </span>

                    <span class="base" ng-hide="existingPackages.is_inclusive">at {{currencySymbol}}{{existingPackages.price_per_piece | number : 2}} / {{existingPackages.amount_type}} <span ng-show="existingPackages.post_type ==='First Night'">per stay</span><span ng-show="existingPackages.post_type ==='Entire Stay'"> per night</span></span>

                    <!-- if addon type is adult /child type multiplification factor will be (addon_count*number of days*(adult_count or child_count)) -->
                    <!-- if addon type is person multiplification factor will be (addon_count*number of days*(adult_count+child_count))-->
                    
                    <span ng-if="existingPackages.amount_type ==='Adult'">
                        <span class="price" ng-hide="existingPackages.is_inclusive || existingPackages.post_type ==='Entire Stay'">{{currencySymbol}}{{existingPackages.totalAmount * reservationData.reservation_card.number_of_adults| number : 2}}</span>
                        <span class="price" ng-hide="existingPackages.is_inclusive || existingPackages.post_type !=='Entire Stay'">{{currencySymbol}}{{existingPackages.totalAmount * packageData.duration_of_stay * reservationData.reservation_card.number_of_adults| number : 2}}</span>
                    </span>
                     <span ng-if="existingPackages.amount_type ==='Child'">
                        <span class="price" ng-hide="existingPackages.is_inclusive || existingPackages.post_type ==='Entire Stay'">{{currencySymbol}}{{existingPackages.totalAmount*reservationData.reservation_card.number_of_children | number : 2}}</span>
                        <span class="price" ng-hide="existingPackages.is_inclusive || existingPackages.post_type !=='Entire Stay'">{{currencySymbol}}{{existingPackages.totalAmount * packageData.duration_of_stay*reservationData.reservation_card.number_of_children| number : 2}}</span>
                    </span>
                    <span ng-if="existingPackages.amount_type ==='Flat'">
                        <span class="price" ng-hide="existingPackages.is_inclusive || existingPackages.post_type ==='Entire Stay'">{{currencySymbol}}{{existingPackages.totalAmount | number : 2}}</span>
                        <span class="price" ng-hide="existingPackages.is_inclusive || existingPackages.post_type !=='Entire Stay'">{{currencySymbol}}{{existingPackages.totalAmount * packageData.duration_of_stay| number : 2}}</span>
                    </span>
                    <span ng-if="existingPackages.amount_type ==='Person'">
                        <span class="price" ng-hide="existingPackages.is_inclusive || existingPackages.post_type ==='Entire Stay'">{{currencySymbol}}{{existingPackages.totalAmount*(reservationData.reservation_card.number_of_children+reservationData.reservation_card.number_of_adults) | number : 2}}</span>
                        <span class="price" ng-hide="existingPackages.is_inclusive || existingPackages.post_type !=='Entire Stay'">{{currencySymbol}}{{existingPackages.totalAmount * packageData.duration_of_stay*(reservationData.reservation_card.number_of_children+reservationData.reservation_card.number_of_adults)| number : 2}}</span>
                    </span>

                    <span class="price" ng-show="existingPackages.is_inclusive">INCL</span>
                    <button type="button" class="icons icon-trash" ng-click="removeSelectedAddons(existingPackages.package_id, $index)">Remove</button>
                </li>
            </ul>
        </div>
        <div class="actions">
            <!-- On Stay Card -->
            <button type="button" class="button orange" ng-click="goToAddons()">Add More to This Room</button>
            <button type="button" class="button blank" ng-click="closeAddOnPopup()">Close</button>

            <!-- On Addons screen 
            <button type="button" class="button blank">Close</button>
            -->

            <!-- On Create Res. Enhance Stay screen:
            <button type="button" class="button white">Add More to This Room</button>
            <button type="button" class="button green">Go To Payment</button>-->
        </div>
    </div>



   
</div>